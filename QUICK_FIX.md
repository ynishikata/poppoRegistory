# 緊急対処: バックエンドが応答しない場合

## 現在の状況

- フロントエンドからリクエストは送信されている
- Authorizationヘッダーは正しく送信されている
- しかし、レスポンスが返ってこない（Status: —）

## 即座に試すべき対処法

### 1. バックエンドを手動で起動

ブラウザで以下のURLに直接アクセス:
```
https://poppo-backend.onrender.com/api/me
```

- **401 Unauthorized** が返る: バックエンドは起動している（正常）
- **接続エラー/タイムアウト**: バックエンドがスリープしている

### 2. Render Dashboardで確認

1. **バックエンドサービスのステータスを確認**
   - "Live": 起動中
   - "Sleeping": スリープ中 ← これが原因の可能性が高い

2. **"Logs" タブを確認**
   - ログが表示されているか
   - エラーメッセージがないか
   - `Server listening on :8080` が表示されているか

### 3. バックエンドを再デプロイ

1. Render Dashboardでバックエンドサービスを選択
2. "Manual Deploy" → "Deploy latest commit" をクリック
3. ビルドとデプロイが完了するまで待つ（3〜7分）
4. デプロイ完了後、再度試す

### 4. 環境変数の確認

Render Dashboardで：
1. バックエンドサービス → "Environment" タブ
2. 以下が設定されているか確認：
   - `SUPABASE_JWT_SECRET`: **必須**
   - `PORT`: デフォルト8080（設定不要でもOK）
   - `CORS_ORIGINS`: `https://poppo-frontend.onrender.com`

## よくある原因

### 原因1: バックエンドがスリープしている（最も可能性が高い）

**症状:**
- 初回アクセス時にタイムアウト
- ログが表示されない

**解決方法:**
1. バックエンドのURLに直接アクセスして起動
2. 30秒〜1分待つ
3. 再度試す

### 原因2: 環境変数が設定されていない

**症状:**
- バックエンドが起動しない
- ログにエラーが表示される

**解決方法:**
1. `SUPABASE_JWT_SECRET` を設定
2. サービスを再デプロイ

### 原因3: ビルドエラー

**症状:**
- デプロイが失敗する
- "Build failed" と表示

**解決方法:**
1. "Logs" タブでビルドエラーを確認
2. エラー内容に応じて修正

## 確認チェックリスト

- [ ] バックエンドのURLに直接アクセスした
- [ ] Render Dashboardでバックエンドのステータスを確認した
- [ ] "Logs" タブでログを確認した
- [ ] 環境変数が設定されているか確認した
- [ ] バックエンドを再デプロイした

## 次のステップ

1. **まず、バックエンドのURLに直接アクセス**
   ```
   https://poppo-backend.onrender.com/api/me
   ```

2. **Render Dashboardのログを確認**
   - 最新のログを確認
   - エラーメッセージがないか確認

3. **問題が解決しない場合**
   - バックエンドを再デプロイ
   - 環境変数を再確認

